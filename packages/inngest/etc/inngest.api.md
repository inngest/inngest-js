## API Report File for "inngest"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { Jsonify } from 'type-fest';
import { Simplify } from 'type-fest';
import { z } from 'zod';

// @public
export interface ClientOptions {
    env?: string;
    eventKey?: string;
    fetch?: typeof fetch;
    inngestBaseUrl?: string;
    // Warning: (ae-forgotten-export) The symbol "Logger" needs to be exported by the entry point index.d.ts
    logger?: Logger;
    // Warning: (ae-forgotten-export) The symbol "MiddlewareStack" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    middleware?: MiddlewareStack;
    name: string;
    schemas?: EventSchemas<Record<string, EventPayload>>;
}

// Warning: (ae-incompatible-release-tags) The symbol "Combine" is marked as @public, but its signature references "IsStringLiteral" which is marked as @internal
//
// @public
export type Combine<TCurr extends Record<string, EventPayload>, TInc extends StandardEventSchemas> = IsStringLiteral<keyof TCurr & string> extends true ? Simplify<Omit<TCurr, keyof StandardEventSchemaToPayload<TInc>> & StandardEventSchemaToPayload<TInc>> : StandardEventSchemaToPayload<TInc>;

// @public
export type EventNameFromTrigger<Events extends Record<string, EventPayload>, T extends TriggerOptions<keyof Events & string>> = T extends string ? T : T extends {
    event: string;
} ? T["event"] : string;

// @public
export interface EventPayload {
    data?: any;
    name: string;
    ts?: number;
    user?: any;
    v?: string;
}

// @public
export class EventSchemas<S extends Record<string, EventPayload>> {
    fromGenerated<T extends StandardEventSchemas>(): EventSchemas<Combine<S, T>>;
    fromRecord<T extends StandardEventSchemas>(): EventSchemas<Combine<S, T>>;
    // Warning: (ae-forgotten-export) The symbol "StandardEventSchema" needs to be exported by the entry point index.d.ts
    fromUnion<T extends {
        name: string;
    } & StandardEventSchema>(): EventSchemas<Combine<S, { [K in T["name"]]: Extract<T, {
            name: K;
        }>; }>>;
    // Warning: (ae-forgotten-export) The symbol "LiteralZodEventSchemas" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "ExcludeEmptyZodLiterals" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "ZodToStandardSchema" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "PickLiterals" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "GetName" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "InferZodShape" needs to be exported by the entry point index.d.ts
    fromZod<T extends ZodEventSchemas | LiteralZodEventSchemas>(schemas: ExcludeEmptyZodLiterals<T>): EventSchemas<Combine<S, ZodToStandardSchema<T extends ZodEventSchemas ? T : PickLiterals<T extends LiteralZodEventSchemas ? T extends infer T_1 extends LiteralZodEventSchemas ? { [I in keyof T_1 as GetName<T[I]>]: InferZodShape<T[I]>; } : never : T extends ZodEventSchemas ? T : never>>>>;
}

// @public
export type EventsFromOpts<TOpts extends ClientOptions> = TOpts["schemas"] extends EventSchemas<infer U> ? U : Record<string, EventPayload>;

// @public
export type FailureEventArgs<P extends EventPayload = EventPayload> = {
    event: FailureEventPayload<P>;
    error: Error;
};

// @public
export type FailureEventPayload<P extends EventPayload = EventPayload> = {
    name: `${internalEvents.FunctionFailed}`;
    data: {
        function_id: string;
        run_id: string;
        error: z.output<typeof failureEventErrorSchema>;
        event: P;
    };
};

// @public
export interface FunctionOptions<Events extends Record<string, EventPayload>, Event extends keyof Events & string> {
    batchEvents?: {
        maxSize: number;
        timeout: TimeStrBatch;
    };
    // Warning: (ae-forgotten-export) The symbol "Cancellation" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    cancelOn?: Cancellation<Events, Event>[];
    concurrency?: number | {
        limit: number;
        key?: string;
    };
    // (undocumented)
    fns?: Record<string, unknown>;
    id?: string;
    idempotency?: string;
    middleware?: MiddlewareStack;
    name: string;
    // (undocumented)
    onFailure?: (...args: unknown[]) => unknown;
    rateLimit?: {
        key?: string;
        limit: number;
        period: TimeStr;
    };
    retries?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20;
}

// @public
export type GetEvents<T extends Inngest<any>> = T extends Inngest<infer U> ? EventsFromOpts<U> : never;

// @public
export enum headerKeys {
    // (undocumented)
    Environment = "x-inngest-env",
    // (undocumented)
    Framework = "x-inngest-framework",
    // (undocumented)
    NoRetry = "x-inngest-no-retry",
    // (undocumented)
    Platform = "x-inngest-platform",
    // (undocumented)
    SdkVersion = "x-inngest-sdk",
    // (undocumented)
    Signature = "x-inngest-signature"
}

// @public
export class Inngest<TOpts extends ClientOptions = ClientOptions> {
    constructor({ name, eventKey, inngestBaseUrl, fetch, env, logger, middleware, }: TOpts);
    // Warning: (ae-forgotten-export) The symbol "ShimmedFns" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "ExclusiveKeys" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "Handler" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "ExtendWithMiddleware" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "builtInMiddleware" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "InngestFunction" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "FunctionTrigger" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    createFunction<TFns extends Record<string, unknown>, TMiddleware extends MiddlewareStack, TTrigger extends TriggerOptions<keyof EventsFromOpts<TOpts> & string>, TShimmedFns extends Record<string, (...args: any[]) => any> = ShimmedFns<TFns>, TTriggerName extends keyof EventsFromOpts<TOpts> & string = EventNameFromTrigger<EventsFromOpts<TOpts>, TTrigger>>(nameOrOpts: string | ExclusiveKeys<Omit<FunctionOptions<EventsFromOpts<TOpts>, TTriggerName>, "fns" | "onFailure" | "middleware"> & {
        fns?: TFns;
        onFailure?: Handler<TOpts, EventsFromOpts<TOpts>, TTriggerName, TShimmedFns, ExtendWithMiddleware<[
        typeof builtInMiddleware,
        NonNullable<TOpts["middleware"]>,
        TMiddleware
        ], FailureEventArgs<EventsFromOpts<TOpts>[TTriggerName]>>>;
        middleware?: TMiddleware;
    }, "batchEvents", "cancelOn" | "rateLimit">, trigger: TTrigger, handler: Handler<TOpts, EventsFromOpts<TOpts>, TTriggerName, TShimmedFns, ExtendWithMiddleware<[
    typeof builtInMiddleware,
    NonNullable<TOpts["middleware"]>,
    TMiddleware
    ]>>): InngestFunction<TOpts, EventsFromOpts<TOpts>, FunctionTrigger<keyof EventsFromOpts<TOpts> & string>, FunctionOptions<EventsFromOpts<TOpts>, keyof EventsFromOpts<TOpts> & string>>;
    readonly inngestBaseUrl: URL;
    readonly name: string;
    // Warning: (ae-forgotten-export) The symbol "SendEventPayload" needs to be exported by the entry point index.d.ts
    send<Payload extends SendEventPayload<EventsFromOpts<TOpts>>>(payload: Payload): Promise<void>;
    setEventKey(
    eventKey: string): void;
}

// Warning: (ae-forgotten-export) The symbol "Handler_2" needs to be exported by the entry point index.d.ts
// Warning: (ae-forgotten-export) The symbol "ActionResponse" needs to be exported by the entry point index.d.ts
//
// @public
export class InngestCommHandler<H extends Handler_2, TResTransform extends (res: ActionResponse<string>, ...args: Parameters<H>) => any, TStreamTransform extends (res: ActionResponse<ReadableStream>, ...args: Parameters<H>) => any> {
    constructor(
    frameworkName: string,
    client: Inngest<any>,
    functions: InngestFunction<any, any, any, any>[], options: RegisterOptions | undefined,
    handler: H,
    transformRes: TResTransform,
    streamTransformRes?: TStreamTransform);
    // Warning: (ae-forgotten-export) The symbol "FunctionConfig" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    protected configs(url: URL): FunctionConfig[];
    createHandler(): (...args: Parameters<H>) => Promise<Awaited<ReturnType<TResTransform>>>;
    protected readonly frameworkName: string;
    readonly handler: H;
    protected _isProd: boolean;
    protected log(level: LogLevel, ...args: unknown[]): void;
    protected readonly logLevel: LogLevel;
    readonly name: string;
    // (undocumented)
    protected register(url: URL, devServerHost: string | undefined, deployId: string | undefined | null, getHeaders: () => Record<string, string>): Promise<{
        status: number;
        message: string;
        modified: boolean;
    }>;
    // Warning: (ae-forgotten-export) The symbol "RegisterRequest" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    protected registerBody(url: URL): RegisterRequest;
    protected reqUrl(url: URL): URL;
    // Warning: (ae-forgotten-export) The symbol "ServerTiming" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "StepRunResponse" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    protected runStep(functionId: string, stepId: string | null, data: unknown, timer: ServerTiming): Promise<StepRunResponse>;
    protected readonly serveHost: string | undefined;
    protected readonly servePath: string | undefined;
    protected signingKey: string | undefined;
    // (undocumented)
    protected signResponse(): string;
    protected _skipDevServer: boolean;
    // (undocumented)
    protected readonly streaming: RegisterOptions["streaming"];
    // (undocumented)
    readonly streamTransformRes: TStreamTransform | undefined;
    readonly transformRes: TResTransform;
    // (undocumented)
    protected validateSignature(sig: string | undefined, body: Record<string, unknown>): void;
}

// @public
export class InngestMiddleware<TOpts extends MiddlewareOptions> {
    constructor({ name, init }: TOpts);
    readonly init: TOpts["init"];
    readonly name: TOpts["name"];
}

// @public
export enum internalEvents {
    FunctionFailed = "inngest/function.failed"
}

// Warning: (ae-internal-missing-underscore) The name "IsStringLiteral" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal
export type IsStringLiteral<T extends string> = string extends T ? false : true;

// @public
export type LiteralZodEventSchema = z.ZodObject<{
    name: z.ZodLiteral<string>;
    data?: z.AnyZodObject | z.ZodAny;
    user?: z.AnyZodObject | z.ZodAny;
}>;

// @public
export type LogArg = unknown;

// @public
export type LogLevel = "fatal" | "error" | "warn" | "info" | "debug" | "silent";

// @public
export interface MiddlewareOptions {
    init: MiddlewareRegisterFn;
    name: string;
}

// Warning: (ae-forgotten-export) The symbol "MaybePromise" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export type MiddlewareRegisterFn = (ctx: {
    client: Inngest<any>;
    fn?: InngestFunction<any, any, any, any>;
}) => MaybePromise<MiddlewareRegisterReturn>;

// @public (undocumented)
export type MiddlewareRegisterReturn = {
    onFunctionRun?: (ctx: InitialRunInfo) => MaybePromise<{
        transformInput?: MiddlewareRunInput;
        beforeMemoization?: BlankHook;
        afterMemoization?: BlankHook;
        beforeExecution?: BlankHook;
        afterExecution?: BlankHook;
        transformOutput?: MiddlewareRunOutput;
        beforeResponse?: BlankHook;
    }>;
    onSendEvent?: () => MaybePromise<{
        transformInput?: MiddlewareSendEventInput;
        transformOutput?: MiddlewareSendEventOutput;
    }>;
};

// @public
export class NonRetriableError extends Error {
    constructor(message: string, options?: {
        cause?: unknown;
    });
    readonly cause?: unknown;
}

// @public
export class ProxyLogger implements Logger {
    constructor(logger: Logger);
    // (undocumented)
    debug(...args: LogArg[]): void;
    // (undocumented)
    disable(): void;
    // (undocumented)
    enable(): void;
    // (undocumented)
    error(...args: LogArg[]): void;
    // (undocumented)
    flush(): Promise<void>;
    // (undocumented)
    info(...args: LogArg[]): void;
    // (undocumented)
    warn(...args: LogArg[]): void;
}

// @public
export enum queryKeys {
    // (undocumented)
    DeployId = "deployId",
    // (undocumented)
    FnId = "fnId",
    // (undocumented)
    Introspect = "introspect",
    // (undocumented)
    StepId = "stepId"
}

// @public
export interface RegisterOptions {
    fetch?: typeof fetch;
    inngestRegisterUrl?: string;
    // @deprecated
    landingPage?: boolean;
    logLevel?: LogLevel;
    name?: string;
    serveHost?: string;
    servePath?: string;
    signingKey?: string;
    streaming?: "allow" | "force" | false;
}

// @public
export type ServeHandler = (
client: Inngest<any>,
functions: InngestFunction<any, any, any, any>[],
opts?: RegisterOptions
/**
* This `any` return is appropriate.
*
* While we can infer the signature of the returned value, we cannot guarantee
* that we have used the same types as the framework we are integrating with,
* which sometimes can cause frustrating collisions for a user that result in
* `as unknown as X` casts.
*
* Instead, we will use `any` here and have the user be able to place it
* anywhere they need.
*/
) => any;

// @public
export type StandardEventSchemas = Record<string, StandardEventSchema>;

// @public
export type StandardEventSchemaToPayload<T> = Simplify<{
    [K in keyof T & string]: {
        [K2 in keyof (Omit<EventPayload, keyof T[K]> & T[K] & {
            name: K;
        })]: (Omit<EventPayload, keyof T[K]> & T[K] & {
            name: K;
        })[K2];
    };
}>;

// @public
export type StrictUnion<T> = StrictUnionHelper<T, T>;

// @public
export type StrictUnionHelper<T, TAll> = T extends any ? T & Partial<Record<Exclude<UnionKeys<TAll>, keyof T>, never>> : never;

// @public
export type TimeStr = `${`${number}w` | ""}${`${number}d` | ""}${`${number}h` | ""}${`${number}m` | ""}${`${number}s` | ""}`;

// @public
export type TriggerOptions<T extends string> = T | StrictUnion<{
    event: T;
    if?: string;
} | {
    cron: string;
}>;

// @public
export type UnionKeys<T> = T extends T ? keyof T : never;

// @public
export type ZodEventSchemas = Record<string, {
    data?: z.AnyZodObject | z.ZodAny;
    user?: z.AnyZodObject | z.ZodAny;
}>;

// Warnings were encountered during analysis:
//
// src/components/InngestMiddleware.ts:261:3 - (ae-forgotten-export) The symbol "InitialRunInfo" needs to be exported by the entry point index.d.ts
// src/components/InngestMiddleware.ts:274:5 - (ae-forgotten-export) The symbol "MiddlewareRunInput" needs to be exported by the entry point index.d.ts
// src/components/InngestMiddleware.ts:280:5 - (ae-forgotten-export) The symbol "BlankHook" needs to be exported by the entry point index.d.ts
// src/components/InngestMiddleware.ts:313:5 - (ae-forgotten-export) The symbol "MiddlewareRunOutput" needs to be exported by the entry point index.d.ts
// src/components/InngestMiddleware.ts:332:5 - (ae-forgotten-export) The symbol "MiddlewareSendEventInput" needs to be exported by the entry point index.d.ts
// src/components/InngestMiddleware.ts:342:5 - (ae-forgotten-export) The symbol "MiddlewareSendEventOutput" needs to be exported by the entry point index.d.ts
// src/types.ts:51:5 - (ae-forgotten-export) The symbol "failureEventErrorSchema" needs to be exported by the entry point index.d.ts
// src/types.ts:695:5 - (ae-forgotten-export) The symbol "TimeStrBatch" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
